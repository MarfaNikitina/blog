<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Does any program really have an unlimited number of bugs?</title>
  <meta name="description" content="">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/custom.css">
  <link rel="canonical" href="http://grishaev.me/en/bugs/">
  <link rel="alternate" type="application/rss+xml" title="Ivan Grishaev's blog" href="http://grishaev.me/feed.xml">

  <link rel="shortcut icon" type="image/x-icon" href="/assets/static/favicons/favicon.ico">

</head>


  <body>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-33533163-2', 'auto');
    ga('send', 'pageview');

</script>

    <header class="site-header">

    <div class="wrapper">

        <div id="logo-handler">
            <a href="/">
              <img src="/assets/static/photo-round-small.png">
            </a>
        </div>

      <a id="home-link" href="/">Ivan Grishaev's blog</a>
      <small>Writing on programming, education, books and negotiations.
</small>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About me</a>
          
        
          
          <a class="page-link" href="/bookshelf">Bookshelf</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        

        <a class="page-link" href="/feed.xml">RSS</a>
        <div id="search-form">
    <form method="get" action="/search/" style="display: inline">
        <input name="q" placeholder="Поиск">
        <button style="border: none; background-color: transparent; cursor: pointer;" type="submit">&#x1f50d;</button>
    </form>
</div>

      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Does any program really have an unlimited number of bugs?</h1>
    <p class="post-meta">
      <time datetime="2017-06-03T00:00:00+00:00" itemprop="datePublished">Jun 3, 2017</time>

      

      <a href="/tag/bugs/" rel="tag">bugs</a>, <a href="/tag/yegor256/" rel="tag">yegor256</a>
    </p>

  </header>

  <div class="post-content" itemprop="articleBody">
    
<p>I really enjoy reading <a href="http://www.yegor256.com/">Yegor’s blog</a>. He brings quite interesting
ideas regarding programming and business. But sometimes, the thoughts he shares
there look a bit strange to me. I’m talking about one of the latest posts
titled <a href="http://www.yegor256.com/2017/05/23/unlimited-number-of-bugs.html">“Any Program Has an Unlimited Number of Bugs”</a>.</p>

<p>I’m writing this in reply to Yegor’s points mentioned there. Please read them
first. To focus on the key notes, let me quote the most sensitive part:</p>

<blockquote>
  <p>Let’s take this simple Java method that calculates a sum of two integers as an
example:</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">sum</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<blockquote>
  <p>How about these bugs:</p>

  <ul>
    <li>It doesn’t handle overflows</li>
    <li>It doesn’t have any user documentation</li>
    <li>Its design is not object-oriented</li>
    <li>It doesn’t sum three or more numbers</li>
    <li>It doesn’t sum double numbers</li>
    <li>It doesn’t cast long to int automatically</li>
    <li>It doesn’t skip execution if one argument is zero</li>
    <li>It doesn’t cache results of previous calculations</li>
    <li>There is no logging</li>
    <li>Checkstyle would complain since arguments are not final</li>
  </ul>
</blockquote>

<p>Well, the points highlighted above make me really uncertain about what really
Yegor meant. And since he didn’t answer me in the commentary section, I will put
my thoughts on that in my own blog.</p>

<p>Let’s look closer at some of them.</p>

<p><strong>It doesn’t have any user documentation</strong></p>

<p>The question is, do you really think we need documentation for <code class="highlighter-rouge">sum</code> function?
What will you put there? I cannot guess nothing other than <code class="highlighter-rouge">It adds two
integers</code>. So what the reason for having it in our code?</p>

<p>In a previous project, I had a teammate who was a fan of docstrings. Every
module, a class or a method should have a docstring, he said. The code he wrote
looked like a school composition. You could not ship your code without his
comments something like “add docs here and there plz”.</p>

<p>Since our product was developing rapidly, we had to change the code all the
time. Surely, we used to forget to update those docstrings because it took extra
time. It was even worse because the docstrings didn’t tell the truth
anymore. Nobody believed them as a result.</p>

<p>What we need <code class="highlighter-rouge">sum</code> documentation for? How should it look like? Who will read
this documentation? A user? I doubt it. A programmer? Even programmers need not
a machinery-generated HTML made of docstrings, but human-written manuals with
examples and snippets.</p>

<p>When you open a particular GitHub project, what do you do first? Reading the
code? No, you scroll down for <code class="highlighter-rouge">README</code> or click on <code class="highlighter-rouge">Wiki</code> link. Digging the
source code is the last thing you would make if something works not well.</p>

<p>Let’s recall what <a href="http://kotaku.com/5975610/the-exceptional-beauty-of-doom-3s-source-code">does one say</a> on DOOM III source code and ID Software
code standards in general:</p>

<blockquote>
  <p>Code should be self-documenting. Comments should be avoided whenever
possible. Comments duplicate work when both writing and reading code. If you
need to comment something to make it understandable it should probably be
rewritten.</p>
</blockquote>

<p><strong>Its design is not object-oriented</strong></p>

<p>We all know Yegor is passionate by OOP. But really, naming a function buggy just
because it’s non-OOP designed is not fair.</p>

<p>What would happen if we had an OOP version of <code class="highlighter-rouge">sum</code> function? I can imagine
something messy like this:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Adder</span> <span class="n">adder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Adder</span><span class="o">();</span>
<span class="n">adder</span><span class="o">.</span><span class="na">setA</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
<span class="n">adder</span><span class="o">.</span><span class="na">setB</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
<span class="n">Integer</span> <span class="n">result</span> <span class="o">=</span> <span class="n">adder</span><span class="o">.</span><span class="na">getResult</span><span class="o">()</span> <span class="c1">// 3</span>
</code></pre></div></div>

<p>We’ve got lot more problems here. The number of lines grew up from 1 to 4
(compare to <code class="highlighter-rouge">add(1, 2)</code>). In addition, now <code class="highlighter-rouge">adder</code> object also keeps it’s own
state. How may I track whether <code class="highlighter-rouge">.setA</code> was called or not? What will happen if I
forget to put <code class="highlighter-rouge">.setB</code> in my code? Will it get a <code class="highlighter-rouge">Null</code> value or an exception
raised?</p>

<p>What will happen if I share <code class="highlighter-rouge">adder</code> object across multiple threads so they call
<code class="highlighter-rouge">setA</code>, <code class="highlighter-rouge">setB</code> and <code class="highlighter-rouge">getResult</code> simultaneously? Nobody would predict the result.</p>

<p>Functional programming teaches us to avoid having state and keep the things
simple. Having a small function without any state rather than manipulating with
objects will pay off for sure.</p>

<p><strong>It doesn’t sum three or more numbers</strong></p>

<p>Surely, if you a Java programmer, you’ve got a problem. Because there is nothing
you can do without rewriting the code. But if you are aware of FP-style and you
have your <code class="highlighter-rouge">add</code> function, you simply do:</p>

<pre><code class="language-lisp">(reduce #'add (list 1 2 3) :initial-value 0) ;; common lisp
(reduce add 0 [1 2 3])                       ;; clojure
</code></pre>

<p>or, in Python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">reduce</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div></div>

<p>This is definitely the right way with <code class="highlighter-rouge">reduce</code> also known as <code class="highlighter-rouge">fold</code>. You don’t
need to write a function that adds million of integers. Instead, you add just
two! And <code class="highlighter-rouge">reduce</code> will care of how to spread it across a sequence of data.</p>

<p>That’s normal to focus on simplest cases and primitive operations first. Then
you build abstractions with high-order functions based on primitives. It makes
the code easier to understand and debug.</p>

<p><strong>It doesn’t sum double numbers</strong> and <strong>It doesn’t cast long to int
automatically</strong></p>

<p>I don’t know if it is really a bug. On the one hand, it would be great to have a
function that adds everything. Again, within any Lisp dialect or Python I may
have it easily. Instead, with static typing you have to write more code.</p>

<p>But on the other hand, having exact <code class="highlighter-rouge">integer</code> types might be some kind of
specific requirement made by design. It could be an utility function that adds
to years or any numbers that do not exceed a couple of thousands. So it’s
difficult to judge without a full context (I’ll say more on that below).</p>

<p><strong>It doesn’t skip execution if one argument is zero</strong></p>

<p>I really doubt it will increase the performance. Adding zero to an integer costs
really nothing on modern hardware. The compilers are smart enough to deal with
such cases. But putting an extra <code class="highlighter-rouge">if</code> clause will definitely increase the number
of instructions because now your program makes a comparison step.</p>

<p>This is exactly what did Knuth say about preliminary optimization. You don’t
even have any metrics about what runs faster: adding zero of extra <code class="highlighter-rouge">if</code>
statement. You even don’t now how frequently your function will be called with
zero argument. I might be 1 time per 100k calls so your trick is made in vain in
that case.</p>

<p>It does not worth it, after all.</p>

<p><strong>It doesn’t cache results of previous calculations</strong></p>

<p>I’m sure any cache system brings as many problems as it solves. First, where
would you store that cache? In application’s memory? In Memcache? User’s
cookies?</p>

<p>Then, you program could sum million of numbers per second. Every cache call
needs al least <code class="highlighter-rouge">O(C)</code> or <code class="highlighter-rouge">O(logN)</code> time to lookup a value. You will slow down
your program dramatically with such approach when caching small functions.</p>

<p><strong>There is no logging</strong></p>

<p>The same claims are here: what exactly are you going to log? Who will read that
logs and how often? For what purpose you want to store such kind of logs? Where
would you store such amount of logs? Did you estimate the slowdown that you will
bring to your system by adding logging? What if some of Ops team would
misconfigure logging system and add email handler to that logger? Or sending SMS
message?</p>

<p>Finally, this function is taken <strong>completely out of the scope</strong> so it’s
impossible to judge on its quality. We should never examine a single function
but only their composition instead. Every function has its own weaknesses and
strengths. Linked together properly they build a system. In such a system,
weakness of any specific function is supported by another function that
validates data, filters input params, cleans up system symbols and so forth.</p>

<p>What I want exactly to say is there is nothing criminal in such a function that
adds to integers. If it’s surrounded with another function that ensures that
both numbers are really integers, there is no need to do all that validations
again when adding them. In our projects, we usually separate our application on
several levels. On the top level of the application, threre is one that
validates the input data. If they are fine, functions on the next level operate
on them as well.</p>

<p><strong>In conclusion</strong>, please avoid using word “bug” when you talk about lack of
logging or caching. Probably you don’t need that stuff. Keep functions free of
having state and producing side effects. When you afraid of the data you use may
be incorrect (Nulls, overflows), don’t rush into adding nested <code class="highlighter-rouge">if</code>s. You’d
rather update your validation logic first.</p>

  </div>

</article>

<div id="disqus_thread"></div>
<script>
    /**
    * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
    */
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');

    s.src = '//igrishaev.disqus.com/embed.js';

    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Ivan Grishaev's blog</li>
          <li><a href="mailto:ivan@grishaev.me">ivan@grishaev.me</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/igrishaev"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">igrishaev</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/i_grishaev"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">i_grishaev</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Writing on programming, education, books and negotiations.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
