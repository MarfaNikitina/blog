<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Ivan Grishaev's blog</title>
  <meta name="description" content="Writing on programming, education, books and negotiations.
">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/custom.css">
  <link rel="canonical" href="http://0.0.0.0:4000/page20/">
  <link rel="alternate" type="application/rss+xml" title="Ivan Grishaev's blog" href="http://0.0.0.0:4000/feed.xml">

  <link rel="shortcut icon" type="image/x-icon" href="/assets/static/favicons/favicon.ico">

</head>


  <body>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-33533163-2', 'auto');
    ga('send', 'pageview');

</script>

    <header class="site-header">

    <div class="wrapper">

        <div id="logo-handler">
            <a href="/">
              <img src="/assets/static/photo-round-small.png">
            </a>
        </div>

      <a id="home-link" href="/">Ivan Grishaev's blog</a>
      <small>Writing on programming, education, books and negotiations.
</small>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About me</a>
          
        
          
          <a class="page-link" href="/bookshelf">Bookshelf</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        

        <a class="page-link" href="/feed.xml">RSS</a>
        <div id="search-form">
    <form method="get" action="/search/" style="display: inline">
        <input name="q" placeholder="Поиск">
        <button style="border: none; background-color: transparent; cursor: pointer;" type="submit">&#x1f50d;</button>
    </form>
</div>

      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="home">

    <ul class="post-list">
        
        <li>

            <h2>
                <a class="post-link" href="/yourself/">Поменьше о себе, пожалуйста</a>
            </h2>

            <span class="post-meta">10.11.2016 &emsp; <a href="/tag/life/" rel="tag">life</a></span>

            <div class="entry"><p>Бывает, делишься с кем-то впечатлениями о книге, статье или фильме и получаешь
примерно такой ответ:</p>

<p>– Я не смотрю аниме.</p>

<p>– Я не посещаю этот сайт.</p>

<p>– Я не читаю книги.</p>

<p>Удивительно, этим грешат даже порядочные на первый взгляд люди. Подобный ответ
вводит меня в ступор, я не знаю, как дальше строить разговор. Объясню почему.</p>

<h3 id="Это-нелогично">Это нелогично</h3>

<p>– Зацени, какая интересная статья.</p>

<p>– Я не читаю Хабр.</p>

<p>Минуточку. Тебя никто не спрашивал, читаешь ты Хабр или нет. Зачем ломать линию
разговора? Очевидно, полное сообщение ответной реплики звучит так: я не буду
читать, потому что не посещаю этот ресурс. Но в исходном сообщении уже
содержится контр-аргумент. Он звучит так: даже если ты не открываешь этот сайт,
сделай это ради полезного материала! Ответ “я не делаю Х” в ответ на призыв –
нелепый.</p>

<p>Что отвечать, если вам советуют что-то, что вы еще не пробовали, не читали, не
смотрели? Задавать открытые вопросы. Напомню, открытые – это те, что начинаются
со слов что, когда, где и т.д. Если предмет беседы того стоит, собеседник внятно
опишет его преимущества.</p>

<p>– Чем привлекает этот фильм?</p>

<p>– Какие особенности в этом языке программирования?</p>

<p>– Какая главная мысль автора?</p>

<p>Если слышите в ответ “да там вообще ништяк зацени”, вежливо заканчивайте
разговор.</p>

<h3 id="Это-эгоистично">Это эгоистично</h3>

<p>– В этой книге подробно описано…</p>

<p>– Я не читаю книги.</p>

<p>Что движит тем, кто делится информацией? Положительные чувства, эмпатия. Если
это не <em>смишные картинки</em>, конечно. Что содержится в ответе? Ничего кроме
эгоизма. Смотри какой я крутой. Я не читаю, не смотрю, это для лохов. Даже
высказанный вежливым тоном, ответ содержит презрение.</p>

<h3 id="Это-предубедительно">Это предубедительно</h3>

<p>Нужно понимать, что не делая чего-то, тем самым себя ограничиваешь. Трудно
предугадать, откуда придет новая мысль, идея, вдохновение. Например, я не смотрю
сериалы, хоть все о них только и говорят. Но прекрасно понимаю, что упускаю
что-то интересное. Поэтому не обрываю тех, кто делится впечатлениями от
просмотренной за ужином новой серии Игры престолов. Может, когда-то меня
проберет, и тоже посмотрю.</p>

<h3 id="Вывод">Вывод</h3>

<p>Если вам что-то предлагают, не спешите рассказывать какой вы крутой, и что вы
делаете, а что нет. Задавайте вопросы, чтобы быстро узнать суть. Вежливо
отвечайте “спасибо”, чтобы не продолжать дальше. И поменьше о себе, я прошу.</p>
</div>
        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/deep-ref-chat/">Перенесли чат в Телеграм</a>
            </h2>

            <span class="post-meta">07.11.2016 &emsp; <a href="/tag/deep-refactoring/" rel="tag">deep-refactoring</a>, <a href="/tag/chat/" rel="tag">chat</a></span>

            <div class="entry"><p>На прошлой неделе провели с коллегами оптимизацию. Вынесли общение, связанное с
Глубоким рефакторингом, в Телеграм. Общаться стало проще, удобней и веселей. В
первый же день случился срач про Гоу, сейчас что-то трут за Руби.</p>

<p>После Фейсбука это как глоток свежего воздуха. Я не знаю, как можно сидеть в
Фейсбуке. Писать что-то длиннее твитов – невозможно, комментировать –
невозможно, следить за общением, искать по истории, трекать – невозможно. Это
мамонт, раздавленный собственным весом.</p>

<p>Телеграм, конечно, тоже <a href="/telegram">добавляет проблем</a>. Теперь это лишний софт,
нотификации, учетная запись. В идеале хотелось бы свести все к электронной почте
и рассылкам, как принято в среде профессионалов.</p>

<p>А пока что прошу зайти в канал Телеграма
<a href="https://telegram.me/deeprefactoring">DeepRefactoring</a>. В нем раньше появятся
анонсы и обсуждение докладов и встреч. В Фейсубке мы стараемся теперь не
общаться, будем только кросспостить анонсы.</p>
</div>
        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/meetup11/">Одиннадцатая встреча</a>
            </h2>

            <span class="post-meta">04.11.2016 &emsp; <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/meetup/" rel="tag">meetup</a>, <a href="/tag/deep-refactoring/" rel="tag">deep-refactoring</a></span>

            <div class="entry"><p>Провели одиннадцатую встречу.</p>

<p>Я топил за Лисп. Рассказал историю, применение, особенности и сильные
стороны. Доклад длился почти два часа. К моей радости, слушателям было
интересно. Наверное, потому что Лисп – то немногое, в чем я действительно
разбираюсь.</p>

<p>Фрагмент записи:</p>

<iframe width="854" height="480" src="https://www.youtube.com/embed/gIod3apuulE" frameborder="0" allowfullscreen=""></iframe>

<p><a href="http://grishaev.me/talks/lisp/lisp.html">Слайды</a></p>

<p>Второй доклад проходил в другом формате. Миша показывал с монитора в реальном
времени как делать всякие крутые штуки. Генерить ХТМЛ, перемещаться по файлам,
быстро искать классы и функции в проекте и т.д. Записи, к сожалению, не
осталось.</p>

<p>С записью вообще беда в этот раз. Сначала я по ошибке не включил запись на
Маке. Два часа выступал уверенный, что все ок. Потом Миша не сохранил файл на
диск. Получились эксклюзивные доклады. Не пришел на митап – теперь не догонишь.</p>

<p>Про Лисп я планирую написать текстовую расшифровку со слайдов по горячим следам.</p>

<p>В этот раз вели трансляцию в Перископе. Батареи Айфона хватило на час. Именно
оттуда удалось вытащить фрагмент доклада про Лисп. Так что не удивляйтесь
странному интерфейсу поверх видео, комментариям и смайликам. На трансляции было
94 человека.</p>

<p>Кстати, мы решили перенести общение в Телеграм и даже создали группу. Об этом –
в отдельном посте.</p>

<p>Скоро анонс двенадцатой встречи, годовой юбилей. Год, Карл! Хотите выступить?
Пишите в личку.</p>
</div>
        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/twitter-feed/">Twitter Feed закрывается</a>
            </h2>

            <span class="post-meta">18.10.2016 &emsp; <a href="/tag/twitter/" rel="tag">twitter</a>, <a href="/tag/feed/" rel="tag">feed</a>, <a href="/tag/rss/" rel="tag">rss</a></span>

            <div class="entry"><p>Сервис <a href="http://twitterfeed.com/">Twitterfeed</a> объявил о скором
закрытии. Предлагают переходить на <a href="http://buffer.com/">Buffer</a> или
<a href="http://dlvr.it/">Dlvr</a>.</p>

<p><img src="/assets/static/twitter-feed.png" alt="twitter-feed" /></p>

<p>Сервис транслировал записи из РСС в социальные сети: Твиттер, Фейсбук и что-то
еще. Полезно для блога: анонсы о свежих постах сами появляются в соцсетях.</p>

<p>Сервис принадлежит компании <a href="https://bitly.com/">Бит.ли</a>, той самой, что владеет
известной сокращалкой ссылок. Twitterfeed был побочным продуктом. Он совсем не
развивался на протяжении последних лет, хотя счетчик лент на главной показывал
сумашедшее количество.</p>

<p>Почему не ввели платную подписку? Думаю, если бы каждый тысячный пользователь
заплатил 5 долларов, этого бы хватило на хостинг и зарплату хотя бы одного
инженера.</p>

<p>Словом, жаль, очень жаль.</p>
</div>
        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/old-pages/">Листая желтые страницы</a>
            </h2>

            <span class="post-meta">17.10.2016 &emsp; <a href="/tag/drupal/" rel="tag">drupal</a>, <a href="/tag/cms/" rel="tag">cms</a>, <a href="/tag/legacy/" rel="tag">legacy</a></span>

            <div class="entry"><p>Девять лет назад зарегистрировался на Друпал.ру. Я был в то время ПХП-неофитом и
смотрел в рот каждому, кто хоть что-то понимал в веб-программировании.</p>

<p>То были веселые денечки. Друпал.ру хостился черт знает где, чуть ли не на
балконе, ложился под малейшей нагрузкой. Чего только не случалось на
форуме. Любое техническое обсуждение сводилось к личностным вопросам. Спорили о
легализации наркотиков, неравенстве рас, словом, треш и угар.</p>

<p>Однажды один неадекват втерся в доверие админу, получил права супер-пользователя
и положил сайт. Зачем? Хотел привлечь внимание к тому, что его троллят. Был
клевый чел Анатолий, у которого Путин виноват в каждой неудаче. Работу долго не
мог найти, маркетолог по образованию. Он часто создавал голосования, а я
накручивал скриптом, отчего у Толи бомбило.</p>

<p>Были клевые ребята, которые вели блоги, регулярно постили полезные штуки. Каждое
утро я начинал с чтения их материалов. Ни про какие RSS я в то время не знал,
тупо лазил по сайтам.</p>

<p><a href="/2013/03/25/1/">С уходом с Друпал.ру</a> читать эти блоги я перестал, а недавно
вспомнил и полез проверять – что стало с ребятами? На что перешли со своего
Друпала? Все-таки четыре года прошло с последнего посещения.</p>

<p>Зашел, и стало грустно. Кое-кто тупо забросил блог, домены не работают. Не
смогли писать в долгосрочной перспективе. Я называю это “сошли с дистанции”, это
правда печально, когда подававший надежды блоггер вдруг замолчал.</p>

<p>Но вторая категория еще грустней. Это те, кто так и остались сидеть на Друпале,
стругая кривые сайты из готовых модулей. Печальное зрелище, потому что
заниматься одной и той же деятельностью без смены инструмента – ужасно. Самые
продвинутые перелезли на другую CMS, но это превозносится с таким пафосом, что
песец.</p>

<p>Глянул форум, полный застой. Восемь лет назад обсужали, как вывести блок в
футере, сегодня то же самое.</p>

<p>Для меня стало шоком, что кто-то считает себя специалистом и до сих пор работает
с Друпалом. Как можно всерьез на него опираться? Старая, деградирующая система,
раздавленная собственным весом и возрастом.</p>

<p>Восемь лет назад сайты на Друпале выглядели грубыми табуретками. Все кривое,
косое, тема оформления натягивается с косяками, всюду мусор, ошметки
непереведенного текста. Вы действительнохотите edit your comment? И сегодня все
так же.</p>

<p>Я к тому, что должно быть движение, развитие. Оставаться подолгу в одной среде
– путь к деградации. Тут тонкая грань, либо становишься признанным гуру, либо
отстаешь от процесса, и центробежная сила уводит на обочину. Поработал три года
с ПХП, перелез на Питон, потом на Скалу, позанимался Хаскелем, ковырнул
Эрланг. И это только языки. Впереди еще Вим с Емаксом, SICP, Латех, шифрование,
протоколы. Столько возможностей!</p>

<p>Впрочем, от тех, кто застыл в развитии, есть два положительных момента. Первый
– кто-то должен делать их работу. Второй – проходя мимо них по прямой
развития, невольно ускоряешь шаг.</p>
</div>
        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/win-start/">Кнопка Пуск</a>
            </h2>

            <span class="post-meta">10.10.2016 &emsp; <a href="/tag/windows/" rel="tag">windows</a>, <a href="/tag/start/" rel="tag">start</a>, <a href="/tag/button/" rel="tag">button</a></span>

            <div class="entry"><p><img src="/assets/static/win-start.png" alt="img" /></p>

<p>Самое ужасное в Винде – кнопка Пуск. Ты нажал ее, чтобы открыть блокнот или
калькулятор. В ответ система вываливает тонны лишней информации. Погода, курсы
валют, новости, игры для Икс-бокса (у меня его нет), покемоны и прочий ад.</p>

<p>Зачем? Где я указывал, что люблю покемонов? Почему показывают игры для консоли в
рабочее время? Зачем список Форбс? Почему жирный кот из Твиттера?</p>

<p>Такое обилие инфомрации страшно дезорганизует. Каждый раз, пробираясь сквозь
дебри этого говна, нужно стараться не забыть: мне нужен калькулятор, мне нужен
калькулятор…</p>

<p>В нормальных системах делают не кнопку Пуск, а умный ввод с дополнением:</p>

<p><img src="/assets/static/input-emacs.png" alt="img" /></p>
</div>
        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/cljs-unraveled/">Книга ClojureScript Unraveled</a>
            </h2>

            <span class="post-meta">04.10.2016 &emsp; <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/book/" rel="tag">book</a>, <a href="/tag/clojurescript/" rel="tag">clojurescript</a></span>

            <div class="entry"><p><img src="/assets/static/cljs-book.png" alt="cover" /></p>

<p>Хорошая, годная книжка по Кложе-скрипту. Авторы коротко и по делу рассказывают о
философии языка, как в нем принято решать те или иные задачи. Отдельная глава
про тесты, несколько о многопоточности и сигналах. Нет долгих базаров о том, что
такое Лисп и скобочки, чем грешат схожие материалы.</p>

<p>Книга доступна на <a href="https://funcool.github.io/clojurescript-unraveled/">Гитхабе</a> в виде сайта, но советую поддержать авторов
и купить на <a href="https://leanpub.com/clojurescript-unraveled">Линпабе</a>. Цена выбирается на усмотрение вплоть до нуля,
рекомендуемая 2 доллара.</p>

</div>
        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/meetup10/">Десятая встреча</a>
            </h2>

            <span class="post-meta">01.10.2016 &emsp; <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/meetup/" rel="tag">meetup</a>, <a href="/tag/deep-refactoring/" rel="tag">deep-refactoring</a></span>

            <div class="entry"><p>Провели десятый митап, юбилей! По этому поводу перепились. Митап продолжался до
закрытия заведения.</p>

<p><img src="/assets/static/meetup10.jpg" alt="cover" /></p>

<p><em>На снимке, к сожалению, не все.</em></p>

<p>В этот раз попробовали вести прямую трансляцию. Решение пришло спонтанно, все
сделали наспех. Вай-фая не было, шарили через айфон. Мак, на который писали
видео и одновременно стримили, дико тормозил, но получилось сносно. Первый
доклад можно было смотреть в реальном времени с задержкой в 3 минуты.</p>

<p>В следующий раз подготовлюсь заранее.</p>

<p>Как обычно, выступили два докладчика. Начал Юра о том, что творится в экосистеме
Руби глазами питонщика:</p>

<iframe width="640" height="360" src="https://www.youtube.com/embed/HQF4zU93qu0" frameborder="0" allowfullscreen=""></iframe>

<p><a href="http://www.slideshare.net/IvanGrishaev/why-everyone-like-ruby">Слайды</a></p>

<p>Продолжил Виталий на тему говнокода:</p>

<iframe width="640" height="360" src="https://www.youtube.com/embed/0fVJ_uLToGc" frameborder="0" allowfullscreen=""></iframe>

<p><a href="http://www.slideshare.net/IvanGrishaev/ss-66596978">Слайды</a></p>

<p>Напомню, сообщество тусит в <a href="https://www.facebook.com/groups/deeprefactoring/">группе Фейсбука</a>.</p>

<p>В понедельник создам анонс одиннадцатой встречи. Доклады накапливаются быстрей,
чем мы рассказываем. Хотите выступить? Пишите в группу.</p>

</div>
        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/phrases/">С вами. Говорит. Робот.</a>
            </h2>

            <span class="post-meta">28.09.2016 &emsp; <a href="/tag/phrases/" rel="tag">phrases</a></span>

            <div class="entry"><p>Бесит, когда робот озвучивает фразы, составленные из кусочков. В такси:</p>

<blockquote>
  <p>К вам подъезжает – Ауди – черный – номер – ноль – три – четыре.</p>
</blockquote>

<p>В Сбербанке:</p>

<blockquote>
  <p>Талон с номером – сто – двадцать – один – Б.</p>
</blockquote>

<p>Провалы между словами режут слух. Люди говорят связно. А. Не. По. Одному. Слову.</p>

<p>Беда с произношением текста в том, что фразу нельзя собрать по кусочкам, как
цепочку байт. Наивный программист уверен, что если список строк легко
соединяется в одну:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">strings</span> <span class="o">=</span> <span class="p">[</span><span class="s">"Талон номер"</span><span class="p">,</span> <span class="s">"сто"</span><span class="p">,</span> <span class="s">"двадцать"</span><span class="p">,</span> <span class="s">"один"</span><span class="p">]</span>
<span class="s">" "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">strings</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="err">Талон</span> <span class="err">номер</span> <span class="err">сто</span> <span class="err">двадцать</span> <span class="err">один</span>
</code></pre></div></div>

<p>то и аудио-файлы достаточно склеить, чтобы получить результат.</p>

<p>Конечно, нет. Странно, что об этом забывают в процессе развертывания системы.</p>

<p>Правильно сделать так – начитать как можно больше фраз, чтобы не было
пауз. Например, для чисел записать варианты от 0 до 999. Да, потребуется время,
ну и что? Займет два лишних часа, зато будет классно звучать. Если в системе
десять окон, то записать десять фраз:</p>

<ul>
  <li>Пройдите в первое окно</li>
  <li>Пройдите во второе окно</li>
  <li>…</li>
</ul>

<p>и так далее. Намного человечней, чем “Пройдите в окно. Три.”</p>

<p>Так вот, в воронежском ГАИ фразы звучат именно таким образом. На каждое окно
отдельная фраза. Каждой цифре – своя дорожка. Удивительно!</p>

<blockquote>
  <p>Клиент с номером. Сто двадцать три. Пройдите в пятое окно.</p>
</blockquote>

<p>При этом первый кусочек заканчивается повышенной интонацией, а паузы перед
номером нет, поэтому обрыва практически не слышно. Полагаю, что дикторша читала
текст целиком, а потом дорожку нарезали, чтобы сохранить интонацию.</p>

<p>Напомню, что это не Сбербанк, который лопается от денег, а госбюджет. Видимо, за
систему отвечал тот, которому было не похер на свою работу. Не знаю, был ли это
программист, или тестировщик, директор или главный гаишник. Но человек золотой,
респект и уважение.</p>
</div>
        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/en/task/">Practical task</a>
            </h2>

            <span class="post-meta">18.09.2016 &emsp; <a href="/tag/interview/" rel="tag">interview</a>, <a href="/tag/python/" rel="tag">python</a>, <a href="/tag/fp/" rel="tag">fp</a>, <a href="/tag/english/" rel="tag">english</a></span>

            <div class="entry"><p>I’m looking for a new job these days. I have had a set of interviews so far. One
time, I faced an interesting practical task. In this post, I want to discuss a
way how I’ve solved it.</p>

<p>The original text took two pages of A4 because of lots of unuseful details. Let
me retell the task by memory.</p>

<blockquote>
  <p>Imagine you have a surface of Mars divided by cells. A robot moves on it. The
robot knows its position represented by (x, y) coordinates and orientation
(North, East, South, West, or just N, E, S, W). You may pass a command to the
robot. A possible command might be to turn left (L), to turn right (R) and to
move forward (F). When the robot rotates, it just changes its orientation
without moving across the cell. When it moves forward, it changes the
coordinates but keeps the orientation.</p>
</blockquote>

<blockquote>
  <p>A robot will be lost when goes out of the surface. But before it has been
lost, it marks the last cell it stands as “dangerous”. When another robot
steps on a dangerous cell, it cannot be lost. Instead, it ignores all the
commands that lead to being lost.</p>
</blockquote>

<blockquote>
  <p>So you have a surfacers dimensions and a bunch of robots. For each robot, you
know its initial position, orientation and a list of commands. Write a program
that moves the robots in series. For each robot, print its final position and
orientation. Also, if the robot has been lost, add “LOST” to that line.</p>
</blockquote>

<blockquote>
  <p>Input sample (don’t pay attention at the comments):</p>
</blockquote>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5 3             # world's width and height
1 1 E           # x, y and orientation of the first robot
RFRFRFRF        # and its list of commands

3 2 N           # the second robot pos and orientation
FRRFLLFFRRFLL   # and its list of commands

0 3 W           # the third one
LLFFFLFLFL      # ...
                # etc...
</code></pre></div></div>

<blockquote>
  <p>Expected output:</p>
</blockquote>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1 1 E
3 3 N LOST
2 3 S
</code></pre></div></div>

<p>I know what are you thinking about. Let’s have a class <code class="highlighter-rouge">World</code> and a class
<code class="highlighter-rouge">Robot</code>. Than I’ll make an instance of class <code class="highlighter-rouge">Game</code> and will move the robots
across the world. But this way seems a bit weird to me because we start with the
entities but not the process.</p>

<p>All these entities do not say how to organize them. We have a common “Paper and
Pen” problem. How should I connect my entities: <code class="highlighter-rouge">Pen.writeOn(Paper)</code> or
<code class="highlighter-rouge">Paper.writeWith(Pen)</code>? Which OOP pattern says directly what are the best
practices? SOLID, Composition or whatever? Should I store an array of robots
inside a <code class="highlighter-rouge">World</code> instance or just keep a reference to the world in each robot?
What if a robot has been lost? Should I null that reference?</p>

<p>See, we’ve got lots of questions, but none of them move us to the solution.</p>

<p>Moreover, once you have solved the task using classical OOP, it would be
difficult to port you code to such FP languages as Clojure or Haskell, because
they do not have classes, just types. Even a Javascript programmer may face some
problems because JS has its own OOP system that differs from Python/Java.</p>

<p>So let me provide a simple solution that do not use classes and tend to be
functional. I will do it using Python, not Clojure to make it clean to everyone.</p>

<p>One famous programmer said: when somebody asks me on an error in their code, I
always respond the following. Imagine your program is a black box. What data
does it receive?  What data does it return? Once you know the answers, it
becomes easy to find a mistake in logic.</p>

<p>I’d like to follow this way. Let’s abstract from the entities and OOP
patterns. We read parameters from the input, process them and print on a
screen. So here is a scheme:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>read_params() --&gt; play_game() --&gt; print_results()
</code></pre></div></div>

<p>Note that reading and writing functions do IO, so they are not pure. Instead,
<code class="highlighter-rouge">play_game</code> accepts plain data structures and has no side effects. That makes it
easy to test in both REPL and unit tests.</p>

<p>When we have basic knowledge of the task, it’s time to write some code. The
following skeleton shows my decision as well:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">parse_input</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
    <span class="o">...</span>


<span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="n">params</span><span class="p">):</span>
    <span class="o">...</span>


<span class="k">def</span> <span class="nf">compose_results</span><span class="p">(</span><span class="n">results</span><span class="p">):</span>
    <span class="o">...</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">params</span> <span class="o">=</span> <span class="n">parse_input</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">play</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">compose_results</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>

</code></pre></div></div>

<p>On the next step we need to clarify what data exactly we expect inside <code class="highlighter-rouge">play</code>
function. There should be world’s limits for each dimension first. And we also
need robots’ data.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">routes</span><span class="p">):</span>
</code></pre></div></div>

<p>Because parsing input stream is boring, let’s just return a sample data from
<code class="highlighter-rouge">parse_input</code> for now:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">parse_input</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="p">(</span>
        <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">"N"</span><span class="p">,</span> <span class="s">"LLLL"</span><span class="p">),</span>
    <span class="p">))</span>
</code></pre></div></div>

<p>Now let’s look closer to the <code class="highlighter-rouge">play</code> function. It’ a black box for now, but we
could imagine what is behind it. I believe, it should build the world at
first. Then, we iterate on robots to process them in series. That is an outer
cycle.</p>

<p>For each robot, we evaluate a bunch of commands: rotate left/right or
move. That’s an inner cycle.</p>

<p>For each robot, we collect its final state with a special flag that indicates
whether a robot has been lost.</p>

<p>Looks simple, let’s code that logic:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">routes</span><span class="p">):</span>
    <span class="n">world</span> <span class="o">=</span> <span class="n">make_world</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">()</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">ori</span><span class="p">,</span> <span class="n">steps</span><span class="p">)</span> <span class="ow">in</span> <span class="n">routes</span><span class="p">:</span>
        <span class="n">robot</span> <span class="o">=</span> <span class="n">make_robot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">ori</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">steps</span><span class="p">:</span>
            <span class="n">ok</span><span class="p">,</span> <span class="n">world</span><span class="p">,</span> <span class="n">robot</span> <span class="o">=</span> <span class="n">update</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">robot</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ok</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="n">results</span> <span class="o">+=</span> <span class="p">((</span><span class="n">ok</span><span class="p">,</span> <span class="n">robot</span><span class="p">),</span> <span class="p">)</span>

    <span class="k">return</span> <span class="n">results</span>

</code></pre></div></div>

<p>Now we have some undefined functions that we must populate before launch the
code. What we should know about the world? Only width, height and what cells are
marked as dangerous. So let the world will be a tuple something like <code class="highlighter-rouge">(20, 30,
((2, 3), (15, 34)))</code>.</p>

<p>The following function returns a new world ready to play:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">make_world</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="p">()</span>
</code></pre></div></div>

<p>Next, what data represent a robot on every turn? Both x and y coordinates plus
orientation. In Python, let it be just a tuple like <code class="highlighter-rouge">(1, 5, "N")</code> or <code class="highlighter-rouge">(10, 5,
"S")</code> for example.</p>

<p>The function below is to create a new robot:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">make_robot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">ori</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">ori</span><span class="p">)</span>
</code></pre></div></div>

<p>Our <code class="highlighter-rouge">update</code> function takes the world, the robot and a command to evaluate. It
returns a tuple of three values. The first one is a boolean flag that indicates
whether the robot is still on the surface. You see, if we get <code class="highlighter-rouge">False</code>, that will
mean the robot has gone away from the world and there is no reason to continue
evaluation for that robot.</p>

<p>The second and the third values are the new world and robot. The thing is I
return new values instead of changing the previous ones. Avoiding state gives us
more freedom in data manipulation. I’ll cover more on that a bit later.</p>

<p>Moving on to the <code class="highlighter-rouge">update</code> function. First, we need to distinguish the command
whether it is to rotate or to move a robot. The case of rotate is really easy to
handle:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">robot</span><span class="p">,</span> <span class="n">step</span><span class="p">):</span>

    <span class="k">if</span> <span class="n">step</span> <span class="ow">in</span> <span class="s">"LR"</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span><span class="p">,</span> <span class="n">world</span><span class="p">,</span> <span class="n">rotate_robot</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>

    <span class="c1"># to be continued
</span></code></pre></div></div>

<p>The code above clearly shows we can rotate a robot without any limits. Notice I
return a new rotated robot instead of changing the one I have in my
function. The rotate function is simple:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">rotate_robot</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="n">step</span><span class="p">):</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">ori</span> <span class="o">=</span> <span class="n">robot</span>

    <span class="n">rules</span> <span class="o">=</span> <span class="p">{</span>
        <span class="p">(</span><span class="s">"N"</span><span class="p">,</span> <span class="s">"L"</span><span class="p">):</span> <span class="s">"W"</span><span class="p">,</span>
        <span class="p">(</span><span class="s">"N"</span><span class="p">,</span> <span class="s">"R"</span><span class="p">):</span> <span class="s">"E"</span><span class="p">,</span>

        <span class="p">(</span><span class="s">"E"</span><span class="p">,</span> <span class="s">"L"</span><span class="p">):</span> <span class="s">"N"</span><span class="p">,</span>
        <span class="p">(</span><span class="s">"E"</span><span class="p">,</span> <span class="s">"R"</span><span class="p">):</span> <span class="s">"S"</span><span class="p">,</span>

        <span class="p">(</span><span class="s">"S"</span><span class="p">,</span> <span class="s">"L"</span><span class="p">):</span> <span class="s">"E"</span><span class="p">,</span>
        <span class="p">(</span><span class="s">"S"</span><span class="p">,</span> <span class="s">"R"</span><span class="p">):</span> <span class="s">"W"</span><span class="p">,</span>

        <span class="p">(</span><span class="s">"W"</span><span class="p">,</span> <span class="s">"L"</span><span class="p">):</span> <span class="s">"S"</span><span class="p">,</span>
        <span class="p">(</span><span class="s">"W"</span><span class="p">,</span> <span class="s">"R"</span><span class="p">):</span> <span class="s">"N"</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">new_ori</span> <span class="o">=</span> <span class="n">rules</span><span class="p">[(</span><span class="n">ori</span><span class="p">,</span> <span class="n">step</span><span class="p">)]</span>
    <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">new_ori</span>
</code></pre></div></div>

<p>Important thing is having a dict of rules is much better then a bunch of nested
<code class="highlighter-rouge">if</code>s. It’s possible to add new rotate rules at any times as well.</p>

<p>The movement forward command is a little bit trickier because of complicated
logic. First of all, we need to know whether the robots stands on a dangerous
cell. Wee also need to check whether the next turn will move the robot out from
the surface.</p>

<p>Remember, if it’s a dangerous cell at the moment, the bad movement is just
ignored. If it isn’t, move the robot. And if it has lost, mark that cell as
dangerous. I’ve finished with the following code:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1"># continues the `update` function
</span>
    <span class="k">if</span> <span class="n">step</span> <span class="o">==</span> <span class="s">"F"</span><span class="p">:</span>

        <span class="n">robot_next</span> <span class="o">=</span> <span class="n">move_robot</span><span class="p">(</span><span class="n">robot</span><span class="p">)</span>
        <span class="n">placed_next</span> <span class="o">=</span> <span class="n">is_placed</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">robot_next</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_scent</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">robot</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">placed_next</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span><span class="p">,</span> <span class="n">world</span><span class="p">,</span> <span class="n">robot_next</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span><span class="p">,</span> <span class="n">world</span><span class="p">,</span> <span class="n">robot</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">placed_next</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span><span class="p">,</span> <span class="n">world</span><span class="p">,</span> <span class="n">robot_next</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span><span class="p">,</span> <span class="n">set_scent</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">robot</span><span class="p">),</span> <span class="n">robot</span>
</code></pre></div></div>

<p>A tree of nested ifs looks ugly to me and may be reduced. But it’s not so
important at the moment. The key feature of the code above is kept in a line:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">robot_next</span> <span class="o">=</span> <span class="n">move_robot</span><span class="p">(</span><span class="n">robot</span><span class="p">)</span>
</code></pre></div></div>

<p>Remember, I spoke about immutable data structures. Instead of moving the robot,
we’ve got a new one that stands on the next cell. You see? Dealing with
immutable data gives us <strong>opportunity to have objects in the future</strong>. When I
have a future state of a robot, I can easy check whether its state fits to the
requirements. And if it does not, just return an old copy of a robot.</p>

<p>Now imagine I had a mutable object with <code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">y</code> fields. To check that robot,
I would move it forward, e.g. change its state, than check the conditions and
rollback the state if they failed. Should I say that way is weird and tends to a
buggy code?</p>

<p>Here is a code for the missing functions. To move a robot:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">move_robot</span><span class="p">(</span><span class="n">robot</span><span class="p">):</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">ori</span> <span class="o">=</span> <span class="n">robot</span>

    <span class="n">rules</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">"N"</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="s">"W"</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="s">"S"</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
        <span class="s">"E"</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="p">}</span>

    <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">rules</span><span class="p">[</span><span class="n">ori</span><span class="p">]</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="n">x</span> <span class="o">+</span> <span class="n">dx</span><span class="p">,</span>
        <span class="n">y</span> <span class="o">+</span> <span class="n">dy</span><span class="p">,</span>
        <span class="n">ori</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></div>

<p>To check if a robot is on the surface:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">is_placed</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">robot</span><span class="p">):</span>
    <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">world</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">robot</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">w</span>
        <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">y</span> <span class="o">&lt;=</span> <span class="n">h</span>
    <span class="p">)</span>
</code></pre></div></div>

<p>And to check whether a robot stands on the dangerous cell:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">is_scent</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">robot</span><span class="p">):</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">scents</span> <span class="o">=</span> <span class="n">world</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">robot</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="ow">in</span> <span class="n">scents</span>
</code></pre></div></div>

<p>So we’ve done with the solution. What wee are missing for now are parsing input
data and formatting the game result functions. I’m not sure they are so
important to place them here. Check the Git repo if you are interested.</p>

<p>Let’s check the data sample given in the task. Say we have sample.txt file with
the input:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5 3
1 1 E
RFRFRFRF

3 2 N
FRRFLLFFRRFLL

0 3 W
LLFFFLFLFL
</code></pre></div></div>

<p>We perform:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat sample.txt | python mars.py
1 1 E
3 3 N LOST
2 3 S
</code></pre></div></div>

<p>Just as the expected results provided in the task.</p>

<p>To sum up, I’ll list the key points that I’ve got from that task.</p>

<ol>
  <li>
    <p>Try to think on the program like a black box, that accepts some data and
produces the result. Your mission is to uncover that black box.</p>
  </li>
  <li>
    <p>Use plain data structures like hash-tables, lists or tuples rather than
classes and objects. Just because it keeps you from all that OOP complexity.</p>
  </li>
  <li>
    <p>Keep data immutable while it is possible rather then modify them.</p>
  </li>
  <li>
    <p>Don’t be afraid of implementing you logic with undefined functions. Or
functions that return hard-coded result. You may correct them later.</p>
  </li>
  <li>
    <p>Separate functions that don’t have side effects from those that have. They
become really easier to test.</p>
  </li>
</ol>

<p>Find the whole code on <a href="https://github.com/igrishaev/mars-task">Github</a>. And by the way, it’s my first post
written in English. I hope you enjoyed that reading.</p>

<p>Thanks!</p>

</div>
        </li>
        
    </ul>

    <h4>
        
        <a href="/page19" class="previous">&larr;</a>
        
        <span class="page_number ">Страница 20 из 44</span>
        
        <a href="/page21" class="next">&rarr;</a>
        
    </h4>

    </div>
</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Ivan Grishaev's blog</li>
          <li><a href="mailto:ivan@grishaev.me">ivan@grishaev.me</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/igrishaev"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">igrishaev</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/i_grishaev"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">i_grishaev</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Writing on programming, education, books and negotiations.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
