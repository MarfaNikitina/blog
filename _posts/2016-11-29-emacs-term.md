---
layout: post
title:  "Емакс в терминале"
permalink: /emacs-term
categories: emacs terminal
---

Долгое время я пользовался Емаксом с графическим интерфейсом. Для Мака такой
Емакс качается с сайта [Emacs For Mac OS X][emacsformacosx] и ставится как
обычное приложение в папке `Applications`.

Два месяца назад перешел на версию для терминала. Ниже короткие заметки о том,
как это сделать и что изменилось.

**Установка из пакетов.** Для Мака ставится из brew: `brew install emacs`. На
момент написания статьи скачивается версия 25.1. Важно: бинарник находится по
пути `/usr/local/Cellar/emacs/25.1/bin/emacs`! Если вы введете в терминале
просто `emacs`, то запустится `/usr/bin/emacs`, у меня это какое-то старье.

**Внешний вид.** Я использую стандартную цветовую схему `light-blue` из
коробки. Включается командой `(load-theme 'light-blue t)`. В терминальной версии
цвета немного другие. Сравните графическую версию:

![gui](/assets/static/emacs/emacs-gui.png)

и терминал:

![terminal](/assets/static/emacs/emacs-term.png)

**Размер текста.** Для комфортной работы я нашел полезным ставить шрифт
покрупнее. Глаза нам даны одни на всю жизнь, так что лучше их поберечь. В
графической версии высота шрифта меняется командой `(set-face-attribute 'default
nil :height 140)` (140 -- моя метрика, подобранная эмпирически). В терминале,
конечно, это не прокатит. Поэтому я просто жму три раза `Cmd + =`. Получается
как на рисунке ниже (картинка специально обрезана, чтобы вошла в колонку без
масштабирования):

![font](/assets/static/emacs/emacs-font.png)

**Курсор.** Больше недели не мог настроить цвет курсора в терминале. В
графической версии был красный, а в терминале серый. Сливается в голубым фоном,
глазам трудно найти. Команды вроде `(set-cursor-color "#ffffff")` не помогают.
Оказывается, в маковском терминале `Iterm2` цвет курсора и текста под ним
регулируется силами самого терминала. Пришлось поправить настройки:

![iterm2](/assets/static/emacs/emacs-iterm2.png)

Вместе с цветом курсора (Cursor) можно включить легкое цветовое выделение
текущей строки (Cursor Guide).

**Общие впечатления.** В целом мне показалось, что терминальная версия работает
быстрее графической. Изредка бывают артефакты при сложной прорисовке (несколько
рабиений окна, например), а так все ок. Мини-буфер, попапы работают как надо.

Напомню, мой конфиг Емакса с комментариями лежит [в Гитхабе][config].

[emacsformacosx]:https://emacsformacosx.com/
[config]:https://github.com/igrishaev/dotfiles/blob/master/.emacs
