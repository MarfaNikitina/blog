---
layout: post
title:  "Ютуб в настольном приложении"
permalink: /youtube-desktop/
tags: youtube vlc video
---

Открывая очередной видос на Ютубе, подумал — так жить нельзя. Мне ведь нужно
только видео, а Ютуб в довесок льет рекламу, трекинг, похожее видео,
комментарии. Браузер Brave и сторонние блокировщики помогают, но все
тормозит. Плюс Гугл постоянно меняет что-то в интерфейсе, и чувствуешь себя
животным, чью миску с едой передвинули в другой угол.

Наверняка же есть настольная прога, которой даешь урл — и она показывает. Слегка
погуглил, и выяснилось, что так и есть.

Знаменитый плеер VLC умеет играть ютубные урлы. И не только ютубные, но и Вимео,
BBC и другие (Порнохаба, увы, нет). Реализовано это скриптом на Lua, который по
урлу вычисляет прямую ссылку на гугловый стрим.

Однако выяснилось, что то ли скрипт поломали, то ли Гугл обновился, и теперь
просмотр Ютуба не работает. Вот что надо сделать, чтобы его починить.

[youtube.lua]: https://raw.githubusercontent.com/videolan/vlc/master/share/lua/playlist/youtube.lua

Скачайте скрипт `youtube.lua` с Гитхаба [по этой ссылке][youtube.lua]. Далее
зайдите в папку

```
/Applications/VLC.app/Contents/MacOS/share/lua/playlist
```

На винде и линксе, понятно, путь будет другим. Удалите файл `youtube.luac` — это
скомпилированный модуль, который сейчас не работает. Скопируйте сюда
`youtube.lua`, что вы скачали. Перезапустите плеер.

Чтобы открыть ютубный видос в VLC, пройдите по пунктам `File` &rarr; `Open
Network` или нажмите `Command+N`. В окошке введите урл.


{% include static.html path="vlc/url.png" %}

Плеер немного потупит, и появится видео:

{% include static.html path="vlc/video.png" %}

Что радует:

- нет рекламы и трекинга;
- нет тормозных скриптов;
- нет оверлеев, по клику на которые улетаешь невесть куда;
- нет комментариев, рекомендуемых видосов и прочего.

Такой просмотр анонимный: он не осядет в истории, не будет преследовать годами
на главной. Если видео длинное, плеер можно запаузить и свернуть как обычное
окно. Не будет лишней вкладке в Хроме.

Работает перемотка стрелочками, при этом вы сами настраиваете, на сколько
секунд. Аналогично с ускорением видео: в выпадающем меню Playback открывается
бегунок.

{% include static.html path="vlc/playback.png" %}

С качеством видео все сложно. Его можно менять, но настройка спрятана так
глубоко, что дойдет только сильнейший. Сначал `VLC` &rarr; `Preferences` &rarr; `Input /
Codecs`, кнопка `Show All`.

{% include static.html path="vlc/codecs.png" %}

Затем прокрутить до Preferred video resolution. По умолчанию там Best available,
что слишком жирно. 1080 или 720 хватит за глаза.

{% include static.html path="vlc/resolution.png" %}

## Автоматизация

Чтобы быстро открыть видос, напишем функцию на bash. Добавьте в ваш `~./bashrc`
или `~./zshrc` следующее:

~~~bash
function play(){
    /Applications/VLC.app/Contents/MacOS/VLC -v $1 &
}
~~~

Амперсанд на конце запустит процесс в фоне, чтобы можно было закрыть терминал,
не прибив плеер. Теперь достаточно вызвать в консоли

```
play https://www.youtube.com/watch?v=88UDgKLL7bE
```

— и появится плеер с видосом:

{% include static.html path="vlc/eat.png" %}

Минус — VLC не сохраняет прогресс просмотра. На длинных видосах, которые
смотришь урывками по нескольку дней, можно случайно потерять прогресс.

Схема не работает с плейлистами: при попытке его открыть запускается только
первый видос. Однако VLC поддерживает свои плейлисты. С его точки зрения ютубное
видео — один из элементов плейлиста. Откройте по очереди несколько видосов и
сохраните плейлист в файл m3u. Получается локальный плейлист, не привязанный к
учетке гугла. Положите его в Дропбокс или где вы храните файлы.

Можно вести несколько плейлистов: избранное, посмотреть позже, музыка и так
далее.

В итоге получается полностью анонимный просмотр Ютуба, без рекламы и с
поддержкой плейлистов. Пока что я тестирую такой подход, и в целом ощущения
приятные — как будто глоток свежего воздуха. Конечно, ощущения другие: здесь
программа реагирует медленнее, а здесь быстрее. Неизвестно, к чему приду, но
попробовать стоит.
