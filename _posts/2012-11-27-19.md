---
layout: post
title:  "1С и JSON в продакшене"
date:   "2012-11-27 03:27:51"
permalink: /2012/11/27/1/
categories: Автоматизация JSON 1С Программирование
---
Еще раз обновил функцию перевода структур 1С в JSON: ((http://pastebin.com/3NwCDCTD))

Исправлены косяки:
- нулевые числа форматируются корректно;
- в строках корректно обрабатываются управляющие символы (\n, \t  и др);
- символы Юникода не переводятся в последовательности вида \uxxxx, потому что это долго (хотя позволяет избежать проблем с кодировкой).

Уже использую функцию для взаимодействия с клиентской частью на Питоне, полет нормальный.



#### Комментарии из старого блога


**12/25/12 Alex:** На вскидку Вы забыли про разделитель триад в числах. И я советовал бы XMLЗначение (пишу по памяти) вместо Формат - и быстрее и меньше ошибок будет.


**12/25/12 Иван Гришаев:** Разделитель убран:

ИначеЕсли Тип = Тип("Число") Тогда
                Возврат Формат(Объект, "ЧРД=.; ЧН=0; ЧГ=0");

ЧГ=0 убирает разделитель разрядов. Он же не нужен.

Вы имели в виду XMLСтрока(). Можно и так, но, во-первых, исчезает ясность (что получается на выходе), а во-вторых, в некоторых случаях он не подходит, например, Неопределено преобразуется в пустую строку, а нужно в null. И не все типы данных поддерживаются.



