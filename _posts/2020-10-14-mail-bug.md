---
layout: post
title:  "Баг с почтой на Маке"
permalink: /mail-bug/
tags: book
---

Наткнулся на странный баг с почтой. Касается MacOS, Mail.app и Gmail, то есть
когда работаешь с Гугловым ящиком из обычного приложения на Маке. Ситуация: если
долго набирать письмо, то при сохранении черновика на сервере создается новое
письмо в цепочке. Выглядит так:

{% include static.html path="1059232/96000877-0cc70f00-0e40-11eb-9b95-59f8e1aa136f.png" %}

Напоминает историю коммитов в Гитхабе. Видно, что каждый раз, когда я делал
паузу, на сервере появлялось новое письмо вместо черновика. В результате
образовалась цепочка на 53(!) письма. Они заполняют выдачу в поиске, мешают
переписке.

Гуглеж показывает, что проблеме уже много лет, и она то появляется, то
исчезает. Переписка в Гугло-группах напоминает синусоиду:

- Чел 1: Письма дублируются!
- Гугл: Починили.
- (через год) Чел 2: опять дублируются!
- Гугл: Починили.
- (через полгода) Чел 3: у меня то же самое!
- ...

На чьей стороне проблема, понять трудно. Скорей всего, при сохранении письма
Mail.app не шлет какой-то айдишник или косячит с параметрами, то есть мячик на
стороне Эпла. Потому что проблемы не было, пока пользовался веб-версией
Gmail. Возможно, сохранение черновика опирается на параметры без документации,
отчего и результат.

Проблему легко победить. Из верхнего меню пройдите по пути Mail &rarr;
Preferences &rarr; Accounts. В списке учеток выберите нужную и включите таб
"Mailbox Behaviours":

{% include static.html path="1059232/96000885-0fc1ff80-0e40-11eb-8df3-a05d9ecf5493.png" %}

В поле "Drafts Mailbox" откройте выпадашку, чтобы указать, где хранить
черновики. Укажите последний пункт "Drafts" под секцией "On my Mac":

{% include static.html path="1059232/96000886-105a9600-0e40-11eb-9e10-ab6f94bf16e2.png" %}

Теперь черновики будут храниться у вас на компе локально. Для коротких писем
черновики вообще не нужны, а длинные лучше набирать в другой программе.

Выставил эту опцию для всех Гугловых ящиков, и проблема ушла.
