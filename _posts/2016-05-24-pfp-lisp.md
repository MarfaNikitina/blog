---
layout: post
title:  "Комментарии к статье о Лиспе"
permalink: /lisp-comments
tags: programming pfp lisp
---

[article-url]: http://fprog.ru/2010/issue5/vsevolod-dyomkin-lisp-philosophy/

Прочитал статью [Лисп -- философия разработки][article-url] от 2010 года. Решил
законспектировать заключительынй раздел с выводами -- очень уж понравились.

> Если рассмотреть каждый отдельный язык, то, как правило, можно найти его
> объединяющую идею. [...] Для Common Lisp объединяющей идеей на данный момент
> является как раз расширяемость.

Не могу с точностью судить о CL, но расширяемость в Кложе(скрипте) сделана на
высоте. Пожалуй, это единственная экосистема, где любой разработчик может внести
свой контриб в чужой тип или протокол без обезьяних патчей, как в Руби и
Питоне. Напоминает перегрузку операторов, но в масштабах всей Лисп-машины. Это
надо просто попробовать.

> В то же время у нее [Джавы] есть и сильная сторона, а именно пронизывающая
> весь язык модель семантической расширяемости через интерфейсы. Так что в
> общем-то не удивительно, что язык Clojure появился именно на Java-платформе...

Да, единственно хорошая вещь в ООП -- это интерфейсы. Недавно я узнал, что в
Кложе(скрипте) вообще все с ног до головы построено на интерфейсах. Это и
придает языку такую мощь.

> Объектно-ориентированный подход обещал, что базовыми компонентами повторного
> использования будут классы и их наборы. Однако, как показывают провалы многих
> технологий, таких как JavaBeans, это тупиковое направление. Ведь отдельные
> классы не могут быть независимыми компонентами, потому что в этом случае они
> рискуют превратиться либо в пространства имен, либо в монолитные монстры,
> противореча самой идее декомпозиции, основанной на классах.

Подпишусь всеми конечностями. Не раз видел: есть жирный класс, нужно создать
похожий. И почему-то разработчик, который вчера заливал про преимущества ООП,
выделяет мышкой и копипастит в соседний модуль. А как же наследование, спрашиваю
я? Все понятно. Классы хоть и похожи, но приведение к общему знаменателю будет
стоить так дорого, что просто невыгодно. И юнит-тестов может не хватить.

> В тех же языках, где расширяемость затруднена [...] есть тенденция к
> постепенному включению всего необходимого в стандартную библиотеку или же в
> какие-то крупные фреймворки, каждый из которых зачастую развивает собственный
> механизм подключения и повторного использования. Здесь структура зависимостей
> — это дерево или же несколько отдельных слабо пересекающихся деревьев.

Вспомнился бедовый Джаваскрипт. Не везет языку. При всех возможностях к
расширению через прототипы, разработчики педалат тысячи микро-модулей по 10
строк каждый. Расширять стандартную библиотеку никто не думает. Так сообщество
двигается [в пропасть](/npm).

> В этом смысле показателен пример Python, известного своим девизом «Батарейки в
> комплекте», который подразумевает наличие в стандартной библиотеке (почти)
> всего, что нужно для разработки. [...] Обратная сторона медали тут отмечена в
> другой цитате: «Пакет, который попадает в стандартную библиотеку, стоит одной
> ногой в могиле»

Меткое замечание. Не случайно автор библиотеки
[requests](http://docs.python-requests.org/en/master/), ставшей де-факто для
HTTP-запросов, заключил с Гвидо неформальное соглашение. Согласно ему,
`requests` НЕ включается в стандартную библиотеку (чего так хотелось Гвидо), но
рекомендуется к использованию на страницах официальной документации. Хитрый
мужик! Знал, чем чревато.

> В Common Lisp для этого [построения расширяемых систем] используются следующие
> технологии: макросы для создания мини-языков для декларативного описания
> систем, дистрибутивов (в отличие от использования для этих целей внешних
> языков, таких как XML)...

Да, достоинство Лиспов -- всегда можно написать доменный язык под любую задачу
благодаря [системе макросов](/code-data). В Лиспе построение XML, HTML, SQL
вырождается в декларативное дерево с одноименными узлами (cdata, div, select).

Кому интересно, загляните и в другие статьи
[Практики функционального программирования](http://fprog.ru/). Актуальность они
не потеряли и еще долго ее сохранят.
